{"version":3,"sources":["../src/pacman.js"],"names":["NONE","UP","LEFT","DOWN","RIGHT","WAITING","PAUSE","PLAYING","COUNTDOWN","EATEN_PAUSE","DYING","Pacman","FPS","Ghost","game","map","colour","position","direction","eatable","eaten","due","getNewCoord","dir","current","speed","isVunerable","isHidden","xSpeed","ySpeed","addBounded","x","y","x1","x2","rem","result","isDangerous","getRandomDirection","moves","Math","floor","random","reset","onWholeSquare","oppositeDirection","makeEatable","getTick","eat","pointToCoord","round","nextSquare","onGridSquare","pos","secondsAgo","tick","getColour","draw","ctx","s","blockSize","top","left","tl","base","inc","high","low","fillStyle","beginPath","moveTo","quadraticCurveTo","closePath","fill","arc","f","off","pane","move","oldPos","onGrid","npos","isFloorSpace","isWallSpace","tmp","User","lives","score","keyMap","KEY","ARROW_LEFT","ARROW_UP","ARROW_RIGHT","ARROW_DOWN","addScore","nScore","theScore","loseLife","getLives","initUser","newLevel","resetPosition","keyDown","e","keyCode","preventDefault","stopPropagation","next","isOnSamePlane","nextWhole","oldPosition","block","isMidSquare","BISCUIT","PILL","setBlock","EMPTY","completedLevel","eatenPill","calcAngle","drawDead","amount","size","half","PI","angle","start","end","Map","height","width","pillSize","withinBounds","isWall","WALL","peice","drawWall","i","j","p","line","strokeStyle","lineWidth","lineCap","WALLS","length","lineTo","curve","stroke","MAP","clone","type","drawPills","fillRect","abs","drawBlock","layout","BLOCK","Audio","files","endEvents","progressEvents","playing","load","name","path","cb","document","createElement","event","progress","addEventListener","setAttribute","pause","callback","loaded","total","removeEventListener","disableSound","currentTime","ended","found","push","play","soundDisabled","resume","PACMAN","state","ghosts","ghostSpecs","eatenCount","level","ghostPos","userPos","stateChanged","timerStart","lastTime","timer","user","stored","drawScore","text","font","fillText","dialog","measureText","localStorage","startLevel","startNewGame","setState","N","S","audio","P","nState","collided","ghost","sqrt","pow","drawFooter","topLeft","textBase","len","redrawBlock","ceil","mainDraw","diff","u","old","mainLoop","keyPress","init","wrapper","root","offsetWidth","canvas","appendChild","getContext","extension","Modernizr","ogg","arr","pop","window","setInterval","String","fromCharCode","Object","prototype","newObj","Array"],"mappings":"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","file":"pacman.js","sourcesContent":["let NONE        = 4,\n  UP = 3,\n  LEFT        = 2,\n  DOWN        = 1,\n  RIGHT       = 11,\n  WAITING     = 5,\n  PAUSE       = 6,\n  PLAYING     = 7,\n  COUNTDOWN   = 8,\n  EATEN_PAUSE = 9,\n  DYING       = 10,\n  Pacman      = {};\n\nPacman.FPS = 30;\n\nPacman.Ghost = function (game, map, colour) {\n\n    var position  = null,\n        direction = null,\n        eatable   = null,\n        eaten     = null,\n        due       = null;\n\n    function getNewCoord(dir, current) {\n\n        var speed  = isVunerable() ? 1 : isHidden() ? 4 : 2,\n            xSpeed = (dir === LEFT && -speed || dir === RIGHT && speed || 0),\n            ySpeed = (dir === DOWN && speed || dir === UP && -speed || 0);\n\n        return {\n            \"x\": addBounded(current.x, xSpeed),\n            \"y\": addBounded(current.y, ySpeed)\n        };\n    };\n\n    /* Collision detection(walls) is done when a ghost lands on an\n     * exact block, make sure they dont skip over it\n     */\n    function addBounded(x1, x2) {\n        var rem    = x1 % 10,\n            result = rem + x2;\n        if (rem !== 0 && result > 10) {\n            return x1 + (10 - rem);\n        } else if(rem > 0 && result < 0) {\n            return x1 - rem;\n        }\n        return x1 + x2;\n    };\n\n    function isVunerable() {\n        return eatable !== null;\n    };\n\n    function isDangerous() {\n        return eaten === null;\n    };\n\n    function isHidden() {\n        return eatable === null && eaten !== null;\n    };\n\n    function getRandomDirection() {\n        var moves = (direction === LEFT || direction === RIGHT)\n            ? [UP, DOWN] : [LEFT, RIGHT];\n        return moves[Math.floor(Math.random() * 2)];\n    };\n\n    function reset() {\n        eaten = null;\n        eatable = null;\n        position = {\"x\": 90, \"y\": 80};\n        direction = getRandomDirection();\n        due = getRandomDirection();\n    };\n\n    function onWholeSquare(x) {\n        return x % 10 === 0;\n    };\n\n    function oppositeDirection(dir) {\n        return dir === LEFT && RIGHT ||\n            dir === RIGHT && LEFT ||\n            dir === UP && DOWN || UP;\n    };\n\n    function makeEatable() {\n        direction = oppositeDirection(direction);\n        eatable = game.getTick();\n    };\n\n    function eat() {\n        eatable = null;\n        eaten = game.getTick();\n    };\n\n    function pointToCoord(x) {\n        return Math.round(x / 10);\n    };\n\n    function nextSquare(x, dir) {\n        var rem = x % 10;\n        if (rem === 0) {\n            return x;\n        } else if (dir === RIGHT || dir === DOWN) {\n            return x + (10 - rem);\n        } else {\n            return x - rem;\n        }\n    };\n\n    function onGridSquare(pos) {\n        return onWholeSquare(pos.y) && onWholeSquare(pos.x);\n    };\n\n    function secondsAgo(tick) {\n        return (game.getTick() - tick) / Pacman.FPS;\n    };\n\n    function getColour() {\n        if (eatable) {\n            if (secondsAgo(eatable) > 5) {\n                return game.getTick() % 20 > 10 ? \"#FFFFFF\" : \"#0000BB\";\n            } else {\n                return \"#0000BB\";\n            }\n        } else if(eaten) {\n            return \"#222\";\n        }\n        return colour;\n    };\n\n    function draw(ctx) {\n\n        var s    = map.blockSize,\n            top  = (position.y/10) * s,\n            left = (position.x/10) * s;\n\n        if (eatable && secondsAgo(eatable) > 8) {\n            eatable = null;\n        }\n\n        if (eaten && secondsAgo(eaten) > 3) {\n            eaten = null;\n        }\n\n        var tl = left + s;\n        var base = top + s - 3;\n        var inc = s / 10;\n\n        var high = game.getTick() % 10 > 5 ? 3  : -3;\n        var low  = game.getTick() % 10 > 5 ? -3 : 3;\n\n        ctx.fillStyle = getColour();\n        ctx.beginPath();\n\n        ctx.moveTo(left, base);\n\n        ctx.quadraticCurveTo(left, top, left + (s/2),  top);\n        ctx.quadraticCurveTo(left + s, top, left+s,  base);\n\n        // Wavy things at the bottom\n        ctx.quadraticCurveTo(tl-(inc*1), base+high, tl - (inc * 2),  base);\n        ctx.quadraticCurveTo(tl-(inc*3), base+low, tl - (inc * 4),  base);\n        ctx.quadraticCurveTo(tl-(inc*5), base+high, tl - (inc * 6),  base);\n        ctx.quadraticCurveTo(tl-(inc*7), base+low, tl - (inc * 8),  base);\n        ctx.quadraticCurveTo(tl-(inc*9), base+high, tl - (inc * 10), base);\n\n        ctx.closePath();\n        ctx.fill();\n\n        ctx.beginPath();\n        ctx.fillStyle = \"#FFF\";\n        ctx.arc(left + 6,top + 6, s / 6, 0, 300, false);\n        ctx.arc((left + s) - 6,top + 6, s / 6, 0, 300, false);\n        ctx.closePath();\n        ctx.fill();\n\n        var f = s / 12;\n        var off = {};\n        off[RIGHT] = [f, 0];\n        off[LEFT]  = [-f, 0];\n        off[UP]    = [0, -f];\n        off[DOWN]  = [0, f];\n\n        ctx.beginPath();\n        ctx.fillStyle = \"#000\";\n        ctx.arc(left+6+off[direction][0], top+6+off[direction][1],\n                s / 15, 0, 300, false);\n        ctx.arc((left+s)-6+off[direction][0], top+6+off[direction][1],\n                s / 15, 0, 300, false);\n        ctx.closePath();\n        ctx.fill();\n\n    };\n\n    function pane(pos) {\n\n        if (pos.y === 100 && pos.x >= 190 && direction === RIGHT) {\n            return {\"y\": 100, \"x\": -10};\n        }\n\n        if (pos.y === 100 && pos.x <= -10 && direction === LEFT) {\n            return position = {\"y\": 100, \"x\": 190};\n        }\n\n        return false;\n    };\n\n    function move(ctx) {\n\n        var oldPos = position,\n            onGrid = onGridSquare(position),\n            npos   = null;\n\n        if (due !== direction) {\n\n            npos = getNewCoord(due, position);\n\n            if (onGrid &&\n                map.isFloorSpace({\n                    \"y\":pointToCoord(nextSquare(npos.y, due)),\n                    \"x\":pointToCoord(nextSquare(npos.x, due))})) {\n                direction = due;\n            } else {\n                npos = null;\n            }\n        }\n\n        if (npos === null) {\n            npos = getNewCoord(direction, position);\n        }\n\n        if (onGrid &&\n            map.isWallSpace({\n                \"y\" : pointToCoord(nextSquare(npos.y, direction)),\n                \"x\" : pointToCoord(nextSquare(npos.x, direction))\n            })) {\n\n            due = getRandomDirection();\n            return move(ctx);\n        }\n\n        position = npos;\n\n        var tmp = pane(position);\n        if (tmp) {\n            position = tmp;\n        }\n\n        due = getRandomDirection();\n\n        return {\n            \"new\" : position,\n            \"old\" : oldPos\n        };\n    };\n\n    return {\n        \"eat\"         : eat,\n        \"isVunerable\" : isVunerable,\n        \"isDangerous\" : isDangerous,\n        \"makeEatable\" : makeEatable,\n        \"reset\"       : reset,\n        \"move\"        : move,\n        \"draw\"        : draw\n    };\n};\n\nPacman.User = function (game, map) {\n\n    var position  = null,\n        direction = null,\n        eaten     = null,\n        due       = null,\n        lives     = null,\n        score     = 5,\n        keyMap    = {};\n\n    keyMap[KEY.ARROW_LEFT]  = LEFT;\n    keyMap[KEY.ARROW_UP]    = UP;\n    keyMap[KEY.ARROW_RIGHT] = RIGHT;\n    keyMap[KEY.ARROW_DOWN]  = DOWN;\n\n    function addScore(nScore) {\n        score += nScore;\n        if (score >= 10000 && score - nScore < 10000) {\n            lives += 1;\n        }\n    };\n\n    function theScore() {\n        return score;\n    };\n\n    function loseLife() {\n        lives -= 1;\n    };\n\n    function getLives() {\n        return lives;\n    };\n\n    function initUser() {\n        score = 0;\n        lives = 3;\n        newLevel();\n    }\n\n    function newLevel() {\n        resetPosition();\n        eaten = 0;\n    };\n\n    function resetPosition() {\n        position = {\"x\": 90, \"y\": 120};\n        direction = LEFT;\n        due = LEFT;\n    };\n\n    function reset() {\n        initUser();\n        resetPosition();\n    };\n\n    function keyDown(e) {\n        if (typeof keyMap[e.keyCode] !== \"undefined\") {\n            due = keyMap[e.keyCode];\n            e.preventDefault();\n            e.stopPropagation();\n            return false;\n        }\n        return true;\n\t};\n\n    function getNewCoord(dir, current) {\n        return {\n            \"x\": current.x + (dir === LEFT && -2 || dir === RIGHT && 2 || 0),\n            \"y\": current.y + (dir === DOWN && 2 || dir === UP    && -2 || 0)\n        };\n    };\n\n    function onWholeSquare(x) {\n        return x % 10 === 0;\n    };\n\n    function pointToCoord(x) {\n        return Math.round(x/10);\n    };\n\n    function nextSquare(x, dir) {\n        var rem = x % 10;\n        if (rem === 0) {\n            return x;\n        } else if (dir === RIGHT || dir === DOWN) {\n            return x + (10 - rem);\n        } else {\n            return x - rem;\n        }\n    };\n\n    function next(pos, dir) {\n        return {\n            \"y\" : pointToCoord(nextSquare(pos.y, dir)),\n            \"x\" : pointToCoord(nextSquare(pos.x, dir)),\n        };\n    };\n\n    function onGridSquare(pos) {\n        return onWholeSquare(pos.y) && onWholeSquare(pos.x);\n    };\n\n    function isOnSamePlane(due, dir) {\n        return ((due === LEFT || due === RIGHT) &&\n                (dir === LEFT || dir === RIGHT)) ||\n            ((due === UP || due === DOWN) &&\n             (dir === UP || dir === DOWN));\n    };\n\n    function move(ctx) {\n\n        var npos        = null,\n            nextWhole   = null,\n            oldPosition = position,\n            block       = null;\n\n        if (due !== direction) {\n            npos = getNewCoord(due, position);\n\n            if (isOnSamePlane(due, direction) ||\n                (onGridSquare(position) &&\n                 map.isFloorSpace(next(npos, due)))) {\n                direction = due;\n            } else {\n                npos = null;\n            }\n        }\n\n        if (npos === null) {\n            npos = getNewCoord(direction, position);\n        }\n\n        if (onGridSquare(position) && map.isWallSpace(next(npos, direction))) {\n            direction = NONE;\n        }\n\n        if (direction === NONE) {\n            return {\"new\" : position, \"old\" : position};\n        }\n\n        if (npos.y === 100 && npos.x >= 190 && direction === RIGHT) {\n            npos = {\"y\": 100, \"x\": -10};\n        }\n\n        if (npos.y === 100 && npos.x <= -12 && direction === LEFT) {\n            npos = {\"y\": 100, \"x\": 190};\n        }\n\n        position = npos;\n        nextWhole = next(position, direction);\n\n        block = map.block(nextWhole);\n\n        if ((isMidSquare(position.y) || isMidSquare(position.x)) &&\n            block === Pacman.BISCUIT || block === Pacman.PILL) {\n\n            map.setBlock(nextWhole, Pacman.EMPTY);\n            addScore((block === Pacman.BISCUIT) ? 10 : 50);\n            eaten += 1;\n\n            if (eaten === 182) {\n                game.completedLevel();\n            }\n\n            if (block === Pacman.PILL) {\n                game.eatenPill();\n            }\n        }\n\n        return {\n            \"new\" : position,\n            \"old\" : oldPosition\n        };\n    };\n\n    function isMidSquare(x) {\n        var rem = x % 10;\n        return rem > 3 || rem < 7;\n    };\n\n    function calcAngle(dir, pos) {\n        if (dir == RIGHT && (pos.x % 10 < 5)) {\n            return {\"start\":0.25, \"end\":1.75, \"direction\": false};\n        } else if (dir === DOWN && (pos.y % 10 < 5)) {\n            return {\"start\":0.75, \"end\":2.25, \"direction\": false};\n        } else if (dir === UP && (pos.y % 10 < 5)) {\n            return {\"start\":1.25, \"end\":1.75, \"direction\": true};\n        } else if (dir === LEFT && (pos.x % 10 < 5)) {\n            return {\"start\":0.75, \"end\":1.25, \"direction\": true};\n        }\n        return {\"start\":0, \"end\":2, \"direction\": false};\n    };\n\n    function drawDead(ctx, amount) {\n\n        var size = map.blockSize,\n            half = size / 2;\n\n        if (amount >= 1) {\n            return;\n        }\n\n        ctx.fillStyle = \"#FFFF00\";\n        ctx.beginPath();\n        ctx.moveTo(((position.x/10) * size) + half,\n                   ((position.y/10) * size) + half);\n\n        ctx.arc(((position.x/10) * size) + half,\n                ((position.y/10) * size) + half,\n                half, 0, Math.PI * 2 * amount, true);\n\n        ctx.fill();\n    };\n\n    function draw(ctx) {\n\n        var s     = map.blockSize,\n            angle = calcAngle(direction, position);\n\n        ctx.fillStyle = \"#FFFF00\";\n\n        ctx.beginPath();\n\n        ctx.moveTo(((position.x/10) * s) + s / 2,\n                   ((position.y/10) * s) + s / 2);\n\n        ctx.arc(((position.x/10) * s) + s / 2,\n                ((position.y/10) * s) + s / 2,\n                s / 2, Math.PI * angle.start,\n                Math.PI * angle.end, angle.direction);\n\n        ctx.fill();\n    };\n\n    initUser();\n\n    return {\n        \"draw\"          : draw,\n        \"drawDead\"      : drawDead,\n        \"loseLife\"      : loseLife,\n        \"getLives\"      : getLives,\n        \"score\"         : score,\n        \"addScore\"      : addScore,\n        \"theScore\"      : theScore,\n        \"keyDown\"       : keyDown,\n        \"move\"          : move,\n        \"newLevel\"      : newLevel,\n        \"reset\"         : reset,\n        \"resetPosition\" : resetPosition\n    };\n};\n\nPacman.Map = function (size) {\n\n    var height    = null,\n        width     = null,\n        blockSize = size,\n        pillSize  = 0,\n        map       = null;\n\n    function withinBounds(y, x) {\n        return y >= 0 && y < height && x >= 0 && x < width;\n    }\n\n    function isWall(pos) {\n        return withinBounds(pos.y, pos.x) && map[pos.y][pos.x] === Pacman.WALL;\n    }\n\n    function isFloorSpace(pos) {\n        if (!withinBounds(pos.y, pos.x)) {\n            return false;\n        }\n        var peice = map[pos.y][pos.x];\n        return peice === Pacman.EMPTY ||\n            peice === Pacman.BISCUIT ||\n            peice === Pacman.PILL;\n    }\n\n    function drawWall(ctx) {\n\n        var i, j, p, line;\n\n        ctx.strokeStyle = \"#0000FF\";\n        ctx.lineWidth   = 5;\n        ctx.lineCap     = \"round\";\n\n        for (i = 0; i < Pacman.WALLS.length; i += 1) {\n            line = Pacman.WALLS[i];\n            ctx.beginPath();\n\n            for (j = 0; j < line.length; j += 1) {\n\n                p = line[j];\n\n                if (p.move) {\n                    ctx.moveTo(p.move[0] * blockSize, p.move[1] * blockSize);\n                } else if (p.line) {\n                    ctx.lineTo(p.line[0] * blockSize, p.line[1] * blockSize);\n                } else if (p.curve) {\n                    ctx.quadraticCurveTo(p.curve[0] * blockSize,\n                                         p.curve[1] * blockSize,\n                                         p.curve[2] * blockSize,\n                                         p.curve[3] * blockSize);\n                }\n            }\n            ctx.stroke();\n        }\n    }\n\n    function reset() {\n        map    = Pacman.MAP.clone();\n        height = map.length;\n        width  = map[0].length;\n    };\n\n    function block(pos) {\n        return map[pos.y][pos.x];\n    };\n\n    function setBlock(pos, type) {\n        map[pos.y][pos.x] = type;\n    };\n\n    function drawPills(ctx) {\n\n        if (++pillSize > 30) {\n            pillSize = 0;\n        }\n\n        for (i = 0; i < height; i += 1) {\n\t\t    for (j = 0; j < width; j += 1) {\n                if (map[i][j] === Pacman.PILL) {\n                    ctx.beginPath();\n\n                    ctx.fillStyle = \"#000\";\n\t\t            ctx.fillRect((j * blockSize), (i * blockSize),\n                                 blockSize, blockSize);\n\n                    ctx.fillStyle = \"#FFF\";\n                    ctx.arc((j * blockSize) + blockSize / 2,\n                            (i * blockSize) + blockSize / 2,\n                            Math.abs(5 - (pillSize/3)),\n                            0,\n                            Math.PI * 2, false);\n                    ctx.fill();\n                    ctx.closePath();\n                }\n\t\t    }\n\t    }\n    };\n\n    function draw(ctx) {\n\n        var i, j, size = blockSize;\n\n        ctx.fillStyle = \"#000\";\n\t    ctx.fillRect(0, 0, width * size, height * size);\n\n        drawWall(ctx);\n\n        for (i = 0; i < height; i += 1) {\n\t\t    for (j = 0; j < width; j += 1) {\n\t\t\t    drawBlock(i, j, ctx);\n\t\t    }\n\t    }\n    };\n\n    function drawBlock(y, x, ctx) {\n\n        var layout = map[y][x];\n\n        if (layout === Pacman.PILL) {\n            return;\n        }\n\n        ctx.beginPath();\n\n        if (layout === Pacman.EMPTY || layout === Pacman.BLOCK ||\n            layout === Pacman.BISCUIT) {\n\n            ctx.fillStyle = \"#000\";\n\t\t    ctx.fillRect((x * blockSize), (y * blockSize),\n                         blockSize, blockSize);\n\n            if (layout === Pacman.BISCUIT) {\n                ctx.fillStyle = \"#FFF\";\n\t\t        ctx.fillRect((x * blockSize) + (blockSize / 2.5),\n                             (y * blockSize) + (blockSize / 2.5),\n                             blockSize / 6, blockSize / 6);\n\t        }\n        }\n        ctx.closePath();\n    };\n\n    reset();\n\n    return {\n        \"draw\"         : draw,\n        \"drawBlock\"    : drawBlock,\n        \"drawPills\"    : drawPills,\n        \"block\"        : block,\n        \"setBlock\"     : setBlock,\n        \"reset\"        : reset,\n        \"isWallSpace\"  : isWall,\n        \"isFloorSpace\" : isFloorSpace,\n        \"height\"       : height,\n        \"width\"        : width,\n        \"blockSize\"    : blockSize\n    };\n};\n\nPacman.Audio = function(game) {\n\n    var files          = [],\n        endEvents      = [],\n        progressEvents = [],\n        playing        = [];\n\n    function load(name, path, cb) {\n\n        var f = files[name] = document.createElement(\"audio\");\n\n        progressEvents[name] = function(event) { progress(event, name, cb); };\n\n        f.addEventListener(\"canplaythrough\", progressEvents[name], true);\n        f.setAttribute(\"preload\", \"true\");\n        f.setAttribute(\"autobuffer\", \"true\");\n        f.setAttribute(\"src\", path);\n        f.pause();\n    };\n\n    function progress(event, name, callback) {\n        if (event.loaded === event.total && typeof callback === \"function\") {\n            callback();\n            files[name].removeEventListener(\"canplaythrough\",\n                                            progressEvents[name], true);\n        }\n    };\n\n    function disableSound() {\n        for (var i = 0; i < playing.length; i++) {\n            files[playing[i]].pause();\n            files[playing[i]].currentTime = 0;\n        }\n        playing = [];\n    };\n\n    function ended(name) {\n\n        var i, tmp = [], found = false;\n\n        files[name].removeEventListener(\"ended\", endEvents[name], true);\n\n        for (i = 0; i < playing.length; i++) {\n            if (!found && playing[i]) {\n                found = true;\n            } else {\n                tmp.push(playing[i]);\n            }\n        }\n        playing = tmp;\n    };\n\n    function play(name) {\n        if (!game.soundDisabled()) {\n            endEvents[name] = function() { ended(name); };\n            playing.push(name);\n            files[name].addEventListener(\"ended\", endEvents[name], true);\n            files[name].play();\n        }\n    };\n\n    function pause() {\n        for (var i = 0; i < playing.length; i++) {\n            files[playing[i]].pause();\n        }\n    };\n\n    function resume() {\n        for (var i = 0; i < playing.length; i++) {\n            files[playing[i]].play();\n        }\n    };\n\n    return {\n        \"disableSound\" : disableSound,\n        \"load\"         : load,\n        \"play\"         : play,\n        \"pause\"        : pause,\n        \"resume\"       : resume\n    };\n};\n\nvar PACMAN = (function () {\n\n    var state        = WAITING,\n        ghosts       = [],\n        ghostSpecs   = [\"#00FFDE\", \"#FF0000\", \"#FFB8DE\", \"#FFB847\"],\n        eatenCount   = 0,\n        level        = 0,\n        tick         = 0,\n        ghostPos, userPos,\n        stateChanged = true,\n        timerStart   = null,\n        lastTime     = 0,\n        ctx          = null,\n        timer        = null,\n        map          = null,\n        user         = null,\n        stored       = null;\n\n    function getTick() {\n        return tick;\n    };\n\n    function drawScore(text, position) {\n        ctx.fillStyle = \"#FFFFFF\";\n        ctx.font      = \"12px BDCartoonShoutRegular\";\n        ctx.fillText(text,\n                     (position[\"new\"][\"x\"] / 10) * map.blockSize,\n                     ((position[\"new\"][\"y\"] + 5) / 10) * map.blockSize);\n    }\n\n    function dialog(text) {\n        ctx.fillStyle = \"#FFFF00\";\n        ctx.font      = \"14px BDCartoonShoutRegular\";\n        var width = ctx.measureText(text).width,\n            x     = ((map.width * map.blockSize) - width) / 2;\n        ctx.fillText(text, x, (map.height * 10) + 8);\n    }\n\n    function soundDisabled() {\n        return localStorage[\"soundDisabled\"] === \"true\";\n    };\n\n    function startLevel() {\n        user.resetPosition();\n        for (var i = 0; i < ghosts.length; i += 1) {\n            ghosts[i].reset();\n        }\n\n    }\n\n    function startNewGame() {\n        setState(WAITING);\n        level = 1;\n        user.reset();\n        map.reset();\n        map.draw(ctx);\n        startLevel();\n    }\n\n    function keyDown(e) {\n        if (e.keyCode === KEY.N) {\n            startNewGame();\n        } else if (e.keyCode === KEY.S) {\n            audio.disableSound();\n            localStorage[\"soundDisabled\"] = !soundDisabled();\n        } else if (e.keyCode === KEY.P && state === PAUSE) {\n            audio.resume();\n            map.draw(ctx);\n            setState(stored);\n        } else if (e.keyCode === KEY.P) {\n            stored = state;\n            setState(PAUSE);\n            audio.pause();\n            map.draw(ctx);\n            dialog(\"Paused\");\n        } else if (state !== PAUSE) {\n            return user.keyDown(e);\n        }\n        return true;\n    }\n\n    function loseLife() {\n        setState(WAITING);\n        user.loseLife();\n        if (user.getLives() > 0) {\n            startLevel();\n        }\n    }\n\n    function setState(nState) {\n        state = nState;\n        stateChanged = true;\n    };\n\n    function collided(user, ghost) {\n        return (Math.sqrt(Math.pow(ghost.x - user.x, 2) +\n                          Math.pow(ghost.y - user.y, 2))) < 10;\n    };\n\n    function drawFooter() {\n\n        var topLeft  = (map.height * map.blockSize),\n            textBase = topLeft + 17;\n\n        ctx.fillStyle = \"#000000\";\n        ctx.fillRect(0, topLeft, (map.width * map.blockSize), 30);\n\n        ctx.fillStyle = \"#FFFF00\";\n\n        for (var i = 0, len = user.getLives(); i < len; i++) {\n            ctx.fillStyle = \"#FFFF00\";\n            ctx.beginPath();\n            ctx.moveTo(150 + (25 * i) + map.blockSize / 2,\n                       (topLeft+1) + map.blockSize / 2);\n\n            ctx.arc(150 + (25 * i) + map.blockSize / 2,\n                    (topLeft+1) + map.blockSize / 2,\n                    map.blockSize / 2, Math.PI * 0.25, Math.PI * 1.75, false);\n            ctx.fill();\n        }\n\n        ctx.fillStyle = !soundDisabled() ? \"#00FF00\" : \"#FF0000\";\n        ctx.font = \"bold 16px sans-serif\";\n        //ctx.fillText(\"\", 10, textBase);\n        ctx.fillText(\"s\", 10, textBase);\n\n        ctx.fillStyle = \"#FFFF00\";\n        ctx.font      = \"14px BDCartoonShoutRegular\";\n        ctx.fillText(\"Score: \" + user.theScore(), 30, textBase);\n        ctx.fillText(\"Level: \" + level, 260, textBase);\n    }\n\n    function redrawBlock(pos) {\n        map.drawBlock(Math.floor(pos.y/10), Math.floor(pos.x/10), ctx);\n        map.drawBlock(Math.ceil(pos.y/10), Math.ceil(pos.x/10), ctx);\n    }\n\n    function mainDraw() {\n\n        var diff, u, i, len, nScore;\n\n        ghostPos = [];\n\n        for (i = 0, len = ghosts.length; i < len; i += 1) {\n            ghostPos.push(ghosts[i].move(ctx));\n        }\n        u = user.move(ctx);\n\n        for (i = 0, len = ghosts.length; i < len; i += 1) {\n            redrawBlock(ghostPos[i].old);\n        }\n        redrawBlock(u.old);\n\n        for (i = 0, len = ghosts.length; i < len; i += 1) {\n            ghosts[i].draw(ctx);\n        }\n        user.draw(ctx);\n\n        userPos = u[\"new\"];\n\n        for (i = 0, len = ghosts.length; i < len; i += 1) {\n            if (collided(userPos, ghostPos[i][\"new\"])) {\n                if (ghosts[i].isVunerable()) {\n                    audio.play(\"eatghost\");\n                    ghosts[i].eat();\n                    eatenCount += 1;\n                    nScore = eatenCount * 50;\n                    drawScore(nScore, ghostPos[i]);\n                    user.addScore(nScore);\n                    setState(EATEN_PAUSE);\n                    timerStart = tick;\n                } else if (ghosts[i].isDangerous()) {\n                    audio.play(\"die\");\n                    setState(DYING);\n                    timerStart = tick;\n                }\n            }\n        }\n    };\n\n    function mainLoop() {\n\n        var diff;\n\n        if (state !== PAUSE) {\n            ++tick;\n        }\n\n        map.drawPills(ctx);\n\n        if (state === PLAYING) {\n            mainDraw();\n        } else if (state === WAITING && stateChanged) {\n            stateChanged = false;\n            map.draw(ctx);\n            dialog(\"Press N to start a New game\");\n        } else if (state === EATEN_PAUSE &&\n                   (tick - timerStart) > (Pacman.FPS / 3)) {\n            map.draw(ctx);\n            setState(PLAYING);\n        } else if (state === DYING) {\n            if (tick - timerStart > (Pacman.FPS * 2)) {\n                loseLife();\n            } else {\n                redrawBlock(userPos);\n                for (i = 0, len = ghosts.length; i < len; i += 1) {\n                    redrawBlock(ghostPos[i].old);\n                    ghostPos.push(ghosts[i].draw(ctx));\n                }\n                user.drawDead(ctx, (tick - timerStart) / (Pacman.FPS * 2));\n            }\n        } else if (state === COUNTDOWN) {\n\n            diff = 5 + Math.floor((timerStart - tick) / Pacman.FPS);\n\n            if (diff === 0) {\n                map.draw(ctx);\n                setState(PLAYING);\n            } else {\n                if (diff !== lastTime) {\n                    lastTime = diff;\n                    map.draw(ctx);\n                    dialog(\"Starting in: \" + diff);\n                }\n            }\n        }\n\n        drawFooter();\n    }\n\n    function eatenPill() {\n        audio.play(\"eatpill\");\n        timerStart = tick;\n        eatenCount = 0;\n        for (i = 0; i < ghosts.length; i += 1) {\n            ghosts[i].makeEatable(ctx);\n        }\n    };\n\n    function completedLevel() {\n        setState(WAITING);\n        level += 1;\n        map.reset();\n        user.newLevel();\n        startLevel();\n    };\n\n    function keyPress(e) {\n        if (state !== WAITING && state !== PAUSE) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    };\n\n    function init(wrapper, root) {\n\n        var i, len, ghost,\n            blockSize = wrapper.offsetWidth / 19,\n            canvas    = document.createElement(\"canvas\");\n\n        canvas.setAttribute(\"width\", (blockSize * 19) + \"px\");\n        canvas.setAttribute(\"height\", (blockSize * 22) + 30 + \"px\");\n\n        wrapper.appendChild(canvas);\n\n        ctx  = canvas.getContext('2d');\n\n        audio = new Pacman.Audio({\"soundDisabled\":soundDisabled});\n        map   = new Pacman.Map(blockSize);\n        user  = new Pacman.User({\n            \"completedLevel\" : completedLevel,\n            \"eatenPill\"      : eatenPill\n        }, map);\n\n        for (i = 0, len = ghostSpecs.length; i < len; i += 1) {\n            ghost = new Pacman.Ghost({\"getTick\":getTick}, map, ghostSpecs[i]);\n            ghosts.push(ghost);\n        }\n\n        map.draw(ctx);\n        dialog(\"Loading ...\");\n\n        var extension = Modernizr.audio.ogg ? 'ogg' : 'mp3';\n\n\n    };\n\n    function load(arr, callback) {\n\n        if (arr.length === 0) {\n            callback();\n        } else {\n            var x = arr.pop();\n            audio.load(x[0], x[1], function() { load(arr, callback); });\n        }\n    };\n\n    function loaded() {\n\n        dialog(\"Press N to Start\");\n\n        document.addEventListener(\"keydown\", keyDown, true);\n        document.addEventListener(\"keypress\", keyPress, true);\n\n        timer = window.setInterval(mainLoop, 1000 / Pacman.FPS);\n    };\n\n    return {\n        \"init\" : init\n    };\n\n}());\n\n/* Human readable keyCode index */\nvar KEY = {'BACKSPACE': 8, 'TAB': 9, 'NUM_PAD_CLEAR': 12, 'ENTER': 13, 'SHIFT': 16, 'CTRL': 17, 'ALT': 18, 'PAUSE': 19, 'CAPS_LOCK': 20, 'ESCAPE': 27, 'SPACEBAR': 32, 'PAGE_UP': 33, 'PAGE_DOWN': 34, 'END': 35, 'HOME': 36, 'ARROW_LEFT': 37, 'ARROW_UP': 38, 'ARROW_RIGHT': 39, 'ARROW_DOWN': 40, 'PRINT_SCREEN': 44, 'INSERT': 45, 'DELETE': 46, 'SEMICOLON': 59, 'WINDOWS_LEFT': 91, 'WINDOWS_RIGHT': 92, 'SELECT': 93, 'NUM_PAD_ASTERISK': 106, 'NUM_PAD_PLUS_SIGN': 107, 'NUM_PAD_HYPHEN-MINUS': 109, 'NUM_PAD_FULL_STOP': 110, 'NUM_PAD_SOLIDUS': 111, 'NUM_LOCK': 144, 'SCROLL_LOCK': 145, 'SEMICOLON': 186, 'EQUALS_SIGN': 187, 'COMMA': 188, 'HYPHEN-MINUS': 189, 'FULL_STOP': 190, 'SOLIDUS': 191, 'GRAVE_ACCENT': 192, 'LEFT_SQUARE_BRACKET': 219, 'REVERSE_SOLIDUS': 220, 'RIGHT_SQUARE_BRACKET': 221, 'APOSTROPHE': 222};\n\n(function () {\n\t/* 0 - 9 */\n\tfor (var i = 48; i <= 57; i++) {\n        KEY['' + (i - 48)] = i;\n\t}\n\t/* A - Z */\n\tfor (i = 65; i <= 90; i++) {\n        KEY['' + String.fromCharCode(i)] = i;\n\t}\n\t/* NUM_PAD_0 - NUM_PAD_9 */\n\tfor (i = 96; i <= 105; i++) {\n        KEY['NUM_PAD_' + (i - 96)] = i;\n\t}\n\t/* F1 - F12 */\n\tfor (i = 112; i <= 123; i++) {\n        KEY['F' + (i - 112 + 1)] = i;\n\t}\n})();\n\nPacman.WALL    = 0;\nPacman.BISCUIT = 1;\nPacman.EMPTY   = 2;\nPacman.BLOCK   = 3;\nPacman.PILL    = 4;\n\nPacman.MAP = [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n\t[0, 4, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 4, 0],\n\t[0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0],\n\t[0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n\t[0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0],\n\t[0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0],\n\t[0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0],\n\t[2, 2, 2, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 2, 2, 2],\n\t[0, 0, 0, 0, 1, 0, 1, 0, 0, 3, 0, 0, 1, 0, 1, 0, 0, 0, 0],\n\t[2, 2, 2, 2, 1, 1, 1, 0, 3, 3, 3, 0, 1, 1, 1, 2, 2, 2, 2],\n\t[0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0],\n\t[2, 2, 2, 0, 1, 0, 1, 1, 1, 2, 1, 1, 1, 0, 1, 0, 2, 2, 2],\n\t[0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0],\n\t[0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n\t[0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0],\n\t[0, 4, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 4, 0],\n\t[0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0],\n\t[0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0],\n\t[0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0],\n\t[0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n];\n\nPacman.WALLS = [\n\n    [{\"move\": [0, 9.5]}, {\"line\": [3, 9.5]},\n     {\"curve\": [3.5, 9.5, 3.5, 9]}, {\"line\": [3.5, 8]},\n     {\"curve\": [3.5, 7.5, 3, 7.5]}, {\"line\": [1, 7.5]},\n     {\"curve\": [0.5, 7.5, 0.5, 7]}, {\"line\": [0.5, 1]},\n     {\"curve\": [0.5, 0.5, 1, 0.5]}, {\"line\": [9, 0.5]},\n     {\"curve\": [9.5, 0.5, 9.5, 1]}, {\"line\": [9.5, 3.5]}],\n\n    [{\"move\": [9.5, 1]},\n     {\"curve\": [9.5, 0.5, 10, 0.5]}, {\"line\": [18, 0.5]},\n     {\"curve\": [18.5, 0.5, 18.5, 1]}, {\"line\": [18.5, 7]},\n     {\"curve\": [18.5, 7.5, 18, 7.5]}, {\"line\": [16, 7.5]},\n     {\"curve\": [15.5, 7.5, 15.5, 8]}, {\"line\": [15.5, 9]},\n     {\"curve\": [15.5, 9.5, 16, 9.5]}, {\"line\": [19, 9.5]}],\n\n    [{\"move\": [2.5, 5.5]}, {\"line\": [3.5, 5.5]}],\n\n    [{\"move\": [3, 2.5]},\n     {\"curve\": [3.5, 2.5, 3.5, 3]},\n     {\"curve\": [3.5, 3.5, 3, 3.5]},\n     {\"curve\": [2.5, 3.5, 2.5, 3]},\n     {\"curve\": [2.5, 2.5, 3, 2.5]}],\n\n    [{\"move\": [15.5, 5.5]}, {\"line\": [16.5, 5.5]}],\n\n    [{\"move\": [16, 2.5]}, {\"curve\": [16.5, 2.5, 16.5, 3]},\n     {\"curve\": [16.5, 3.5, 16, 3.5]}, {\"curve\": [15.5, 3.5, 15.5, 3]},\n     {\"curve\": [15.5, 2.5, 16, 2.5]}],\n\n    [{\"move\": [6, 2.5]}, {\"line\": [7, 2.5]}, {\"curve\": [7.5, 2.5, 7.5, 3]},\n     {\"curve\": [7.5, 3.5, 7, 3.5]}, {\"line\": [6, 3.5]},\n     {\"curve\": [5.5, 3.5, 5.5, 3]}, {\"curve\": [5.5, 2.5, 6, 2.5]}],\n\n    [{\"move\": [12, 2.5]}, {\"line\": [13, 2.5]}, {\"curve\": [13.5, 2.5, 13.5, 3]},\n     {\"curve\": [13.5, 3.5, 13, 3.5]}, {\"line\": [12, 3.5]},\n     {\"curve\": [11.5, 3.5, 11.5, 3]}, {\"curve\": [11.5, 2.5, 12, 2.5]}],\n\n    [{\"move\": [7.5, 5.5]}, {\"line\": [9, 5.5]}, {\"curve\": [9.5, 5.5, 9.5, 6]},\n     {\"line\": [9.5, 7.5]}],\n    [{\"move\": [9.5, 6]}, {\"curve\": [9.5, 5.5, 10.5, 5.5]},\n     {\"line\": [11.5, 5.5]}],\n\n\n    [{\"move\": [5.5, 5.5]}, {\"line\": [5.5, 7]}, {\"curve\": [5.5, 7.5, 6, 7.5]},\n     {\"line\": [7.5, 7.5]}],\n    [{\"move\": [6, 7.5]}, {\"curve\": [5.5, 7.5, 5.5, 8]}, {\"line\": [5.5, 9.5]}],\n\n    [{\"move\": [13.5, 5.5]}, {\"line\": [13.5, 7]},\n     {\"curve\": [13.5, 7.5, 13, 7.5]}, {\"line\": [11.5, 7.5]}],\n    [{\"move\": [13, 7.5]}, {\"curve\": [13.5, 7.5, 13.5, 8]},\n     {\"line\": [13.5, 9.5]}],\n\n    [{\"move\": [0, 11.5]}, {\"line\": [3, 11.5]}, {\"curve\": [3.5, 11.5, 3.5, 12]},\n     {\"line\": [3.5, 13]}, {\"curve\": [3.5, 13.5, 3, 13.5]}, {\"line\": [1, 13.5]},\n     {\"curve\": [0.5, 13.5, 0.5, 14]}, {\"line\": [0.5, 17]},\n     {\"curve\": [0.5, 17.5, 1, 17.5]}, {\"line\": [1.5, 17.5]}],\n    [{\"move\": [1, 17.5]}, {\"curve\": [0.5, 17.5, 0.5, 18]}, {\"line\": [0.5, 21]},\n     {\"curve\": [0.5, 21.5, 1, 21.5]}, {\"line\": [18, 21.5]},\n     {\"curve\": [18.5, 21.5, 18.5, 21]}, {\"line\": [18.5, 18]},\n     {\"curve\": [18.5, 17.5, 18, 17.5]}, {\"line\": [17.5, 17.5]}],\n    [{\"move\": [18, 17.5]}, {\"curve\": [18.5, 17.5, 18.5, 17]},\n     {\"line\": [18.5, 14]}, {\"curve\": [18.5, 13.5, 18, 13.5]},\n     {\"line\": [16, 13.5]}, {\"curve\": [15.5, 13.5, 15.5, 13]},\n     {\"line\": [15.5, 12]}, {\"curve\": [15.5, 11.5, 16, 11.5]},\n     {\"line\": [19, 11.5]}],\n\n    [{\"move\": [5.5, 11.5]}, {\"line\": [5.5, 13.5]}],\n    [{\"move\": [13.5, 11.5]}, {\"line\": [13.5, 13.5]}],\n\n    [{\"move\": [2.5, 15.5]}, {\"line\": [3, 15.5]},\n     {\"curve\": [3.5, 15.5, 3.5, 16]}, {\"line\": [3.5, 17.5]}],\n    [{\"move\": [16.5, 15.5]}, {\"line\": [16, 15.5]},\n     {\"curve\": [15.5, 15.5, 15.5, 16]}, {\"line\": [15.5, 17.5]}],\n\n    [{\"move\": [5.5, 15.5]}, {\"line\": [7.5, 15.5]}],\n    [{\"move\": [11.5, 15.5]}, {\"line\": [13.5, 15.5]}],\n\n    [{\"move\": [2.5, 19.5]}, {\"line\": [5, 19.5]},\n     {\"curve\": [5.5, 19.5, 5.5, 19]}, {\"line\": [5.5, 17.5]}],\n    [{\"move\": [5.5, 19]}, {\"curve\": [5.5, 19.5, 6, 19.5]},\n     {\"line\": [7.5, 19.5]}],\n\n    [{\"move\": [11.5, 19.5]}, {\"line\": [13, 19.5]},\n     {\"curve\": [13.5, 19.5, 13.5, 19]}, {\"line\": [13.5, 17.5]}],\n    [{\"move\": [13.5, 19]}, {\"curve\": [13.5, 19.5, 14, 19.5]},\n     {\"line\": [16.5, 19.5]}],\n\n    [{\"move\": [7.5, 13.5]}, {\"line\": [9, 13.5]},\n     {\"curve\": [9.5, 13.5, 9.5, 14]}, {\"line\": [9.5, 15.5]}],\n    [{\"move\": [9.5, 14]}, {\"curve\": [9.5, 13.5, 10, 13.5]},\n     {\"line\": [11.5, 13.5]}],\n\n    [{\"move\": [7.5, 17.5]}, {\"line\": [9, 17.5]},\n     {\"curve\": [9.5, 17.5, 9.5, 18]}, {\"line\": [9.5, 19.5]}],\n    [{\"move\": [9.5, 18]}, {\"curve\": [9.5, 17.5, 10, 17.5]},\n     {\"line\": [11.5, 17.5]}],\n\n    [{\"move\": [8.5, 9.5]}, {\"line\": [8, 9.5]}, {\"curve\": [7.5, 9.5, 7.5, 10]},\n     {\"line\": [7.5, 11]}, {\"curve\": [7.5, 11.5, 8, 11.5]},\n     {\"line\": [11, 11.5]}, {\"curve\": [11.5, 11.5, 11.5, 11]},\n     {\"line\": [11.5, 10]}, {\"curve\": [11.5, 9.5, 11, 9.5]},\n     {\"line\": [10.5, 9.5]}]\n];\n\nObject.prototype.clone = function () {\n    var i, newObj = (this instanceof Array) ? [] : {};\n    for (i in this) {\n        if (i === 'clone') {\n            continue;\n        }\n        if (this[i] && typeof this[i] === \"object\") {\n            newObj[i] = this[i].clone();\n        } else {\n            newObj[i] = this[i];\n        }\n    }\n    return newObj;\n};\n"]}